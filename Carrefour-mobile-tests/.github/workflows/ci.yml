name: Testes Mobile com Emulador

on:
  workflow_dispatch:  # permite execuÃ§Ã£o manual via GitHub

jobs:
  android-tests:
    runs-on: self-hosted  # usa seu runner com Android Studio

    steps:
      - name: ðŸ”„ Checkout do cÃ³digo
        uses: actions/checkout@v3

      - name: â˜• Verificar Java
        run: java -version

      - name: ðŸ“± Iniciar emulador Android
        run: |
          echo "Iniciando emulador Pixel_6..."
          $ANDROID_HOME/emulator/emulator -avd Pixel_6 -no-window -no-audio -gpu off &
          echo "Aguardando dispositivo..."
          adb wait-for-device
          echo "Desbloqueando tela..."
          adb shell input keyevent 82
        shell: bash



      - name: ðŸš€ Iniciar Appium
        run: |
          echo "Iniciando Appium..."
          appium &
        shell: bash

      - name: ðŸ§ª Executar testes com Maven
        run: |
          echo "Executando testes..."
          mvn test
        shell: bash

      - name: ðŸ“Š Publicar relatÃ³rio Surefire
        uses: actions/upload-artifact@v3
        with:
          name: surefire-report
          path: target/surefire-reports/

      - name: ðŸ“¸ Upload de screenshots
        uses: actions/upload-artifact@v3
        with:
           name: screenshots
           path: target/screenshots/



